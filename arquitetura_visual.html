<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Arquitetura BuilderBot ‚Äî Sistema de Educa√ß√£o Conversacional</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600;700&family=Sora:wght@300;400;600;700;800&display=swap');

  :root {
    --bg: #0a0e1a;
    --surface: #111827;
    --surface2: #1a2235;
    --border: #1e2d45;
    --primary: #00d4ff;
    --primary-dim: #00d4ff22;
    --green: #00ff88;
    --green-dim: #00ff8822;
    --purple: #a855f7;
    --purple-dim: #a855f722;
    --orange: #ff6b35;
    --orange-dim: #ff6b3522;
    --yellow: #fbbf24;
    --yellow-dim: #fbbf2422;
    --text: #e2e8f0;
    --text-dim: #64748b;
    --text-muted: #334155;
  }

  * { margin:0; padding:0; box-sizing:border-box; }

  body {
    font-family: 'Sora', sans-serif;
    background: var(--bg);
    color: var(--text);
    min-height: 100vh;
    overflow-x: hidden;
  }

  /* GRID DE FUNDO */
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background-image:
      linear-gradient(rgba(0,212,255,0.03) 1px, transparent 1px),
      linear-gradient(90deg, rgba(0,212,255,0.03) 1px, transparent 1px);
    background-size: 40px 40px;
    pointer-events: none;
    z-index: 0;
  }

  .container { position:relative; z-index:1; max-width:1200px; margin:0 auto; padding:40px 24px; }

  /* HEADER */
  header { text-align:center; margin-bottom:60px; }
  .badge {
    display:inline-block; font-family:'JetBrains Mono',monospace;
    font-size:11px; letter-spacing:3px; color:var(--primary);
    border:1px solid var(--primary); padding:4px 14px;
    border-radius:2px; margin-bottom:20px;
    text-transform:uppercase;
  }
  h1 {
    font-size:clamp(28px,5vw,52px); font-weight:800; line-height:1.1;
    background: linear-gradient(135deg, #fff 0%, var(--primary) 60%, var(--purple) 100%);
    -webkit-background-clip:text; -webkit-text-fill-color:transparent;
    margin-bottom:12px;
  }
  .subtitle { font-size:15px; color:var(--text-dim); font-weight:300; max-width:600px; margin:0 auto; }

  /* M√âTRICAS TOPO */
  .metrics {
    display:grid; grid-template-columns:repeat(4,1fr); gap:16px;
    margin-bottom:56px;
  }
  .metric {
    background:var(--surface); border:1px solid var(--border);
    border-radius:8px; padding:20px; text-align:center;
    transition:all 0.3s;
  }
  .metric:hover { border-color:var(--primary); transform:translateY(-2px); }
  .metric-val {
    font-size:36px; font-weight:800; font-family:'JetBrains Mono',monospace;
    line-height:1;
  }
  .metric-label { font-size:12px; color:var(--text-dim); margin-top:6px; letter-spacing:0.5px; }
  .m1 .metric-val { color:var(--green); }
  .m2 .metric-val { color:var(--primary); }
  .m3 .metric-val { color:var(--purple); }
  .m4 .metric-val { color:var(--orange); }

  /* TABS */
  .tabs { display:flex; gap:4px; margin-bottom:32px; flex-wrap:wrap; }
  .tab {
    font-family:'JetBrains Mono',monospace; font-size:12px;
    padding:8px 18px; border:1px solid var(--border);
    background:transparent; color:var(--text-dim);
    cursor:pointer; border-radius:4px; transition:all 0.2s;
    letter-spacing:0.5px;
  }
  .tab:hover { border-color:var(--primary); color:var(--primary); }
  .tab.active { background:var(--primary-dim); border-color:var(--primary); color:var(--primary); }

  .tab-content { display:none; }
  .tab-content.active { display:block; }

  /* STACK VISUAL */
  .stack-grid {
    display:grid; grid-template-columns:repeat(auto-fill, minmax(280px,1fr)); gap:16px;
  }
  .card {
    background:var(--surface); border:1px solid var(--border);
    border-radius:8px; padding:20px; transition:all 0.3s;
    position:relative; overflow:hidden;
  }
  .card::before {
    content:''; position:absolute; top:0; left:0; right:0; height:2px;
  }
  .card:hover { transform:translateY(-3px); box-shadow:0 8px 32px rgba(0,0,0,0.4); }
  .card.green::before { background:var(--green); }
  .card.blue::before { background:var(--primary); }
  .card.purple::before { background:var(--purple); }
  .card.orange::before { background:var(--orange); }
  .card.yellow::before { background:var(--yellow); }
  .card.green:hover { border-color:var(--green); }
  .card.blue:hover { border-color:var(--primary); }
  .card.purple:hover { border-color:var(--purple); }
  .card.orange:hover { border-color:var(--orange); }
  .card.yellow:hover { border-color:var(--yellow); }

  .card-layer {
    font-family:'JetBrains Mono',monospace; font-size:10px;
    letter-spacing:2px; text-transform:uppercase;
    color:var(--text-muted); margin-bottom:8px;
  }
  .card-name { font-size:17px; font-weight:700; margin-bottom:4px; }
  .card-sub { font-size:12px; color:var(--text-dim); margin-bottom:12px; font-family:'JetBrains Mono',monospace; }
  .card-desc { font-size:13px; color:var(--text-dim); line-height:1.6; margin-bottom:12px; }
  .card-tags { display:flex; flex-wrap:wrap; gap:6px; }
  .tag {
    font-size:10px; font-family:'JetBrains Mono',monospace;
    padding:3px 8px; border-radius:3px; letter-spacing:0.5px;
  }
  .tag-green { background:var(--green-dim); color:var(--green); }
  .tag-blue { background:var(--primary-dim); color:var(--primary); }
  .tag-purple { background:var(--purple-dim); color:var(--purple); }
  .tag-orange { background:var(--orange-dim); color:var(--orange); }
  .tag-yellow { background:var(--yellow-dim); color:var(--yellow); }

  /* FLUXO DE MENSAGEM */
  .flow { display:flex; flex-direction:column; gap:0; }
  .flow-step {
    display:grid; grid-template-columns:60px 1fr;
    gap:0; position:relative;
  }
  .flow-step:not(:last-child) .flow-line { height:100%; }
  .flow-num-col { display:flex; flex-direction:column; align-items:center; padding-top:16px; }
  .flow-num {
    width:36px; height:36px; border-radius:50%;
    display:flex; align-items:center; justify-content:center;
    font-family:'JetBrains Mono',monospace; font-weight:700; font-size:13px;
    flex-shrink:0; z-index:1;
  }
  .flow-line { width:2px; flex:1; background:var(--border); margin:4px 0; }
  .flow-body {
    background:var(--surface); border:1px solid var(--border);
    border-radius:8px; padding:16px 20px; margin:8px 0;
    transition:all 0.3s;
  }
  .flow-body:hover { border-color:var(--primary); }
  .flow-actor { font-size:12px; font-family:'JetBrains Mono',monospace; color:var(--text-dim); margin-bottom:4px; }
  .flow-action { font-size:14px; font-weight:600; margin-bottom:4px; }
  .flow-detail { font-size:12px; color:var(--text-dim); line-height:1.5; }

  /* C√ìDIGO */
  .code-block {
    background:#060b14; border:1px solid var(--border);
    border-radius:8px; padding:24px; margin:16px 0;
    font-family:'JetBrains Mono',monospace; font-size:13px;
    line-height:1.8; overflow-x:auto;
  }
  .code-header {
    display:flex; align-items:center; gap:8px; margin-bottom:16px;
    padding-bottom:12px; border-bottom:1px solid var(--border);
  }
  .code-dot { width:10px; height:10px; border-radius:50%; }
  .code-filename { font-size:12px; color:var(--text-dim); }
  .kw { color:#ff79c6; }
  .fn { color:var(--primary); }
  .str { color:var(--green); }
  .cm { color:#6272a4; }
  .op { color:var(--orange); }
  .num { color:var(--yellow); }
  .cls { color:var(--purple); }

  /* ROADMAP */
  .roadmap { display:flex; flex-direction:column; gap:8px; }
  .rm-item {
    display:grid; grid-template-columns:40px 1fr 90px 160px;
    gap:16px; align-items:center;
    background:var(--surface); border:1px solid var(--border);
    border-radius:6px; padding:14px 20px; transition:all 0.2s;
  }
  .rm-item:hover { border-color:var(--primary); }
  .rm-num {
    font-family:'JetBrains Mono',monospace; font-size:13px;
    font-weight:700; color:var(--primary); text-align:center;
  }
  .rm-name { font-size:14px; font-weight:600; }
  .rm-desc { font-size:12px; color:var(--text-dim); margin-top:2px; }
  .rm-days { font-family:'JetBrains Mono',monospace; font-size:13px; color:var(--green); text-align:center; font-weight:700; }
  .rm-who { font-size:11px; color:var(--text-dim); font-family:'JetBrains Mono',monospace; }
  .rm-total {
    background:linear-gradient(135deg,var(--primary-dim),var(--purple-dim));
    border-color:var(--primary);
  }
  .rm-total .rm-name { color:var(--primary); }
  .rm-total .rm-days { color:var(--yellow); font-size:16px; }

  /* QUEM FAZ O QU√ä */
  .roles { display:grid; grid-template-columns:repeat(auto-fill,minmax(260px,1fr)); gap:16px; }
  .role-card {
    background:var(--surface); border:1px solid var(--border);
    border-radius:8px; padding:20px;
  }
  .role-icon { font-size:28px; margin-bottom:12px; }
  .role-name { font-size:15px; font-weight:700; margin-bottom:4px; }
  .role-tool { font-family:'JetBrains Mono',monospace; font-size:11px; color:var(--primary); margin-bottom:10px; }
  .role-items { list-style:none; }
  .role-items li { font-size:12px; color:var(--text-dim); padding:4px 0; padding-left:14px; position:relative; line-height:1.5; }
  .role-items li::before { content:'‚Ä∫'; position:absolute; left:0; color:var(--primary); }

  /* SE√á√ÉO TITLES */
  .section-header { margin-bottom:24px; }
  .section-title { font-size:22px; font-weight:700; margin-bottom:6px; }
  .section-sub { font-size:13px; color:var(--text-dim); }

  /* RESPONSIVE */
  @media(max-width:700px) {
    .metrics { grid-template-columns:repeat(2,1fr); }
    .rm-item { grid-template-columns:30px 1fr; }
    .rm-days, .rm-who { display:none; }
  }
</style>
</head>
<body>
<div class="container">

  <header>
    <div class="badge">ARQUITETURA DEFINITIVA v2.0</div>
    <h1>BuilderBot + Stack OSS</h1>
    <p class="subtitle">Sistema de Educa√ß√£o Conversacional ‚Äî IA gera os fluxos, humanos aprovam e operam</p>
  </header>

  <!-- M√âTRICAS -->
  <div class="metrics">
    <div class="metric m1">
      <div class="metric-val">~18</div>
      <div class="metric-label">dias para MVP completo</div>
    </div>
    <div class="metric m2">
      <div class="metric-val">0</div>
      <div class="metric-label">vendor lock-in</div>
    </div>
    <div class="metric m3">
      <div class="metric-val">100%</div>
      <div class="metric-label">fluxos gerados por IA</div>
    </div>
    <div class="metric m4">
      <div class="metric-val">Git</div>
      <div class="metric-label">versionamento nativo</div>
    </div>
  </div>

  <!-- TABS -->
  <div class="tabs">
    <button class="tab active" onclick="showTab('stack')">Stack Completa</button>
    <button class="tab" onclick="showTab('fluxo')">Fluxo de Mensagem</button>
    <button class="tab" onclick="showTab('codigo')">C√≥digo BuilderBot</button>
    <button class="tab" onclick="showTab('equipe')">Equipe Mista</button>
    <button class="tab" onclick="showTab('roadmap')">Roadmap</button>
  </div>

  <!-- TAB: STACK -->
  <div class="tab-content active" id="tab-stack">
    <div class="section-header">
      <div class="section-title">Stack OSS ‚Äî 13 componentes, zero licen√ßa paga</div>
      <div class="section-sub">Cada componente escolhido por: licen√ßa permissiva ¬∑ manuten√ß√£o ativa ¬∑ integra√ß√£o nativa com os demais</div>
    </div>
    <div class="stack-grid">

      <div class="card green">
        <div class="card-layer">Bot / Fluxos</div>
        <div class="card-name">BuilderBot</div>
        <div class="card-sub">@builderbot/bot ¬∑ MIT ¬∑ ‚òÖ12k</div>
        <div class="card-desc">Motor de conversa√ß√£o WhatsApp. A IA (Antigravity/Claude Code) gera os fluxos TypeScript por m√≥dulo. Voc√™ revisa e faz commit no Git.</div>
        <div class="card-tags">
          <span class="tag tag-green">TypeScript</span>
          <span class="tag tag-green">IA gera c√≥digo</span>
          <span class="tag tag-green">Git nativo</span>
        </div>
      </div>

      <div class="card blue">
        <div class="card-layer">WhatsApp Bridge</div>
        <div class="card-name">Evolution API</div>
        <div class="card-sub">@builderbot/provider-evolution-api ¬∑ Apache 2.0</div>
        <div class="card-desc">Provider nativo do BuilderBot para Evolution API. QR Code no dev, API Oficial Meta na produ√ß√£o ‚Äî troca de provider sem reescrever um fluxo.</div>
        <div class="card-tags">
          <span class="tag tag-blue">Provider nativo</span>
          <span class="tag tag-blue">QR ‚Üí Meta API</span>
        </div>
      </div>

      <div class="card yellow">
        <div class="card-layer">Admin UI (equipe)</div>
        <div class="card-name">ToolJet</div>
        <div class="card-sub">tooljet/tooljet ¬∑ AGPL ¬∑ ‚òÖ30k</div>
        <div class="card-desc">Painel para equipe n√£o-t√©cnica. Gestores configuram par√¢metros (score m√≠nimo, textos), veem alunos e exportam relat√≥rios ‚Äî sem uma linha de c√≥digo.</div>
        <div class="card-tags">
          <span class="tag tag-yellow">Zero c√≥digo</span>
          <span class="tag tag-yellow">Conecta PostgreSQL</span>
        </div>
      </div>

      <div class="card orange">
        <div class="card-layer">Atendimento Humano</div>
        <div class="card-name">Chatwoot</div>
        <div class="card-sub">chatwoot/chatwoot ¬∑ MIT ¬∑ ‚òÖ22k</div>
        <div class="card-desc">Inbox multi-agente para tutores. Pausa o bot quando tutor assume, distribui por round-robin, registra hist√≥rico e retoma o fluxo ao encerrar.</div>
        <div class="card-tags">
          <span class="tag tag-orange">Round-robin</span>
          <span class="tag tag-orange">Pausa bot</span>
          <span class="tag tag-orange">Hist√≥rico</span>
        </div>
      </div>

      <div class="card purple">
        <div class="card-layer">LMS Headless</div>
        <div class="card-name">Wellms</div>
        <div class="card-sub">EscolaLMS ¬∑ MIT</div>
        <div class="card-desc">API REST para cursos, m√≥dulos, progresso e certificados. BuilderBot consome via .addAction(). A equipe n√£o precisa saber que existe.</div>
        <div class="card-tags">
          <span class="tag tag-purple">API-first</span>
          <span class="tag tag-purple">Headless</span>
          <span class="tag tag-purple">Certificados</span>
        </div>
      </div>

      <div class="card purple">
        <div class="card-layer">IA / RAG</div>
        <div class="card-name">RAGFlow</div>
        <div class="card-sub">infiniflow/ragflow ¬∑ Apache 2.0 ¬∑ ‚òÖ42k</div>
        <div class="card-desc">Ingere os PDFs das apostilas, cria chunks com OCR, exp√µe API de busca sem√¢ntica. BuilderBot consulta antes de gerar cada resposta contextualizada.</div>
        <div class="card-tags">
          <span class="tag tag-purple">PDF + OCR</span>
          <span class="tag tag-purple">Sem√¢ntico</span>
          <span class="tag tag-purple">API REST</span>
        </div>
      </div>

      <div class="card blue">
        <div class="card-layer">Vector DB</div>
        <div class="card-name">pgvector</div>
        <div class="card-sub">pgvector/pgvector ¬∑ PostgreSQL ¬∑ ‚òÖ15k</div>
        <div class="card-desc">Extens√£o vetorial do PostgreSQL j√° na stack. Sem banco de dados separado para embeddings ‚Äî tudo no mesmo Postgres que j√° est√° rodando.</div>
        <div class="card-tags">
          <span class="tag tag-blue">Extens√£o</span>
          <span class="tag tag-blue">Sem container extra</span>
        </div>
      </div>

      <div class="card green">
        <div class="card-layer">Orquestra√ß√£o</div>
        <div class="card-name">N8N</div>
        <div class="card-sub">n8n-io/n8n ¬∑ AGPL ¬∑ ‚òÖ45k</div>
        <div class="card-desc">Automa√ß√µes: lembretes de inatividade, scoring de leads, emiss√£o de certificados, alertas para gestores. BuilderBot delega l√≥gica complexa ao N8N via HTTP.</div>
        <div class="card-tags">
          <span class="tag tag-green">Automa√ß√µes</span>
          <span class="tag tag-green">Scoring</span>
          <span class="tag tag-green">Certificados</span>
        </div>
      </div>

      <div class="card orange">
        <div class="card-layer">Certificados PDF</div>
        <div class="card-name">n8n-nodes-puppeteer</div>
        <div class="card-sub">drudge/n8n-nodes-puppeteer ¬∑ MIT</div>
        <div class="card-desc">Gera o PDF do certificado dentro do N8N via template HTML/Puppeteer. Zero microservi√ßo adicional ‚Äî o workflow N8N cuida de tudo.</div>
        <div class="card-tags">
          <span class="tag tag-orange">Community Node</span>
          <span class="tag tag-orange">PDF nativo N8N</span>
        </div>
      </div>

      <div class="card blue">
        <div class="card-layer">Storage</div>
        <div class="card-name">MinIO</div>
        <div class="card-sub">minio/minio ¬∑ AGPL ¬∑ ‚òÖ50k</div>
        <div class="card-desc">S3-compatible self-hosted para certificados, apostilas e uploads. URLs assinadas com expira√ß√£o para entrega segura via WhatsApp.</div>
        <div class="card-tags">
          <span class="tag tag-blue">S3-compatible</span>
          <span class="tag tag-blue">URLs assinadas</span>
        </div>
      </div>

      <div class="card green">
        <div class="card-layer">Analytics</div>
        <div class="card-name">Metabase</div>
        <div class="card-sub">metabase/metabase ¬∑ AGPL ¬∑ ‚òÖ39k</div>
        <div class="card-desc">Dashboard SQL para gestores. Conecta ao PostgreSQL, cria tabelas de leads qualificados, funil de convers√£o e KPIs ‚Äî sem SQL, sem c√≥digo.</div>
        <div class="card-tags">
          <span class="tag tag-green">Zero SQL</span>
          <span class="tag tag-green">Leads tabulados</span>
        </div>
      </div>

      <div class="card yellow">
        <div class="card-layer">Infra</div>
        <div class="card-name">Coolify</div>
        <div class="card-sub">coollabsio/coolify ¬∑ Apache 2.0 ¬∑ ‚òÖ40k</div>
        <div class="card-desc">Orquestra todos os containers na VPS Hostinger: SSL autom√°tico, dom√≠nios, deploys com clique, rede Docker interna. J√° est√° na stack.</div>
        <div class="card-tags">
          <span class="tag tag-yellow">J√° instalado</span>
          <span class="tag tag-yellow">SSL auto</span>
          <span class="tag tag-yellow">1-click deploy</span>
        </div>
      </div>

      <div class="card purple">
        <div class="card-layer">IDE / Dev</div>
        <div class="card-name">Google Antigravity</div>
        <div class="card-sub">Local (PC dev) ¬∑ Gemini/Claude/GPT</div>
        <div class="card-desc">IDE agentic que gera fluxos BuilderBot a partir da ementa, atualiza c√≥digo, faz deploy e testa ‚Äî voc√™ descreve o m√≥dulo, o agente entrega o TypeScript.</div>
        <div class="card-tags">
          <span class="tag tag-purple">IA agentic</span>
          <span class="tag tag-purple">Gera TypeScript</span>
          <span class="tag tag-purple">Deploy auto</span>
        </div>
      </div>

    </div>
  </div>

  <!-- TAB: FLUXO -->
  <div class="tab-content" id="tab-fluxo">
    <div class="section-header">
      <div class="section-title">Fluxo completo: do WhatsApp √† resposta com IA</div>
      <div class="section-sub">Cada mensagem do aluno percorre esta pipeline em menos de 2 segundos</div>
    </div>
    <div class="flow">
      <div class="flow-step">
        <div class="flow-num-col">
          <div class="flow-num" style="background:var(--green-dim);color:var(--green)">1</div>
          <div class="flow-line"></div>
        </div>
        <div class="flow-body">
          <div class="flow-actor">ALUNO</div>
          <div class="flow-action">Envia mensagem no WhatsApp</div>
          <div class="flow-detail">Ex: "quero estudar o m√≥dulo 2" ou uma d√∫vida sobre o conte√∫do da aula</div>
        </div>
      </div>
      <div class="flow-step">
        <div class="flow-num-col">
          <div class="flow-num" style="background:var(--primary-dim);color:var(--primary)">2</div>
          <div class="flow-line"></div>
        </div>
        <div class="flow-body">
          <div class="flow-actor">EVOLUTION API</div>
          <div class="flow-action">Recebe e repassa ao BuilderBot</div>
          <div class="flow-detail">@builderbot/provider-evolution-api recebe o webhook e injeta no motor de fluxos</div>
        </div>
      </div>
      <div class="flow-step">
        <div class="flow-num-col">
          <div class="flow-num" style="background:var(--primary-dim);color:var(--primary)">3</div>
          <div class="flow-line"></div>
        </div>
        <div class="flow-body">
          <div class="flow-actor">BUILDERBOT ‚Äî addKeyword / addAction</div>
          <div class="flow-action">Identifica fluxo e executa a l√≥gica</div>
          <div class="flow-detail">Palavra-chave ou regex aciona o fluxo do m√≥dulo. addAction() chama APIs externas (RAGFlow, Wellms, N8N)</div>
        </div>
      </div>
      <div class="flow-step">
        <div class="flow-num-col">
          <div class="flow-num" style="background:var(--purple-dim);color:var(--purple)">4</div>
          <div class="flow-line"></div>
        </div>
        <div class="flow-body">
          <div class="flow-actor">RAGFLOW + pgvector</div>
          <div class="flow-action">Busca sem√¢ntica nas apostilas</div>
          <div class="flow-detail">BuilderBot envia a d√∫vida para RAGFlow ‚Üí retorna os chunks mais relevantes do PDF da apostila ‚Üí contexto para a IA</div>
        </div>
      </div>
      <div class="flow-step">
        <div class="flow-num-col">
          <div class="flow-num" style="background:var(--purple-dim);color:var(--purple)">5</div>
          <div class="flow-line"></div>
        </div>
        <div class="flow-body">
          <div class="flow-actor">GEMINI / GPT API</div>
          <div class="flow-action">Gera resposta contextualizada</div>
          <div class="flow-detail">Prompt: "Aluno no M√≥dulo X, score Y%. Material: [chunks RAGFlow]. Responda: [d√∫vida]. Formato: m√°x 3 msgs WhatsApp."</div>
        </div>
      </div>
      <div class="flow-step">
        <div class="flow-num-col">
          <div class="flow-num" style="background:var(--primary-dim);color:var(--primary)">6</div>
          <div class="flow-line"></div>
        </div>
        <div class="flow-body">
          <div class="flow-actor">BUILDERBOT ‚Äî flowDynamic()</div>
          <div class="flow-action">Envia resposta e avan√ßa o fluxo</div>
          <div class="flow-detail">Resposta entregue em partes (WhatsApp-friendly). Se quiz: captura resposta com addAnswer({capture:true})</div>
        </div>
      </div>
      <div class="flow-step">
        <div class="flow-num-col">
          <div class="flow-num" style="background:var(--green-dim);color:var(--green)">7</div>
          <div class="flow-line"></div>
        </div>
        <div class="flow-body">
          <div class="flow-actor">N8N (async)</div>
          <div class="flow-action">Salva progresso e scoring em background</div>
          <div class="flow-detail">BuilderBot chama webhook N8N ‚Üí N8N salva score no Wellms + calcula tags de interesse + atualiza perfil de lead no PostgreSQL</div>
        </div>
      </div>
      <div class="flow-step">
        <div class="flow-num-col">
          <div class="flow-num" style="background:var(--green-dim);color:var(--green)">8</div>
        </div>
        <div class="flow-body">
          <div class="flow-actor">ALUNO</div>
          <div class="flow-action">Recebe resposta personalizada no WhatsApp</div>
          <div class="flow-detail">Em menos de 2 segundos, com contexto do material presencial, n√≠vel do aluno e hist√≥rico da conversa</div>
        </div>
      </div>
    </div>
  </div>

  <!-- TAB: C√ìDIGO -->
  <div class="tab-content" id="tab-codigo">
    <div class="section-header">
      <div class="section-title">BuilderBot ‚Äî O que a IA gera para voc√™</div>
      <div class="section-sub">Exemplo real de fluxo para M√≥dulo de Acesso a Cr√©dito ‚Äî gerado pelo Antigravity a partir da ementa</div>
    </div>

    <div class="code-block">
      <div class="code-header">
        <div class="code-dot" style="background:#ff5f57"></div>
        <div class="code-dot" style="background:#febc2e"></div>
        <div class="code-dot" style="background:#28c840"></div>
        <span class="code-filename">flows/modulo2-garantias-credito.flow.ts</span>
      </div>
<pre><span class="cm">// Gerado por Google Antigravity em 3 minutos a partir da ementa</span>
<span class="cm">// Revis√£o humana: 5 minutos. Deploy: 1 clique no Coolify.</span>

<span class="kw">import</span> { <span class="fn">addKeyword</span>, <span class="fn">addAnswer</span>, <span class="fn">addAction</span> } <span class="kw">from</span> <span class="str">'@builderbot/bot'</span>
<span class="kw">import</span> { <span class="fn">ragflowSearch</span> } <span class="kw">from</span> <span class="str">'../services/ragflow'</span>
<span class="kw">import</span> { <span class="fn">geminiGenerate</span> } <span class="kw">from</span> <span class="str">'../services/gemini'</span>
<span class="kw">import</span> { <span class="fn">wellmsSaveProgress</span> } <span class="kw">from</span> <span class="str">'../services/wellms'</span>
<span class="kw">import</span> { <span class="cls">modulo3Flow</span> } <span class="kw">from</span> <span class="str">'./modulo3.flow'</span>
<span class="kw">import</span> { <span class="cls">revisaoModulo2Flow</span> } <span class="kw">from</span> <span class="str">'./revisao-modulo2.flow'</span>

<span class="kw">export const</span> <span class="cls">modulo2Flow</span> = <span class="fn">addKeyword</span>([<span class="str">'modulo 2'</span>, <span class="str">'m√≥dulo 2'</span>, <span class="str">'garantias'</span>])

  <span class="cm">// 1. Boas-vindas e envio da apostila</span>
  .<span class="fn">addAnswer</span>(<span class="str">`*M√≥dulo 2 ‚Äî Garantias em Opera√ß√µes de Cr√©dito* üè¶\n\nVamos explorar os principais tipos de garantia que os bancos exigem nas opera√ß√µes de cr√©dito.`</span>)
  .<span class="fn">addAnswer</span>(<span class="str">`Aqui est√° o material desta aula:`</span>, {
    <span class="op">media</span>: <span class="fn">process</span>.env.<span class="cls">MINIO_URL</span> + <span class="str">'/apostilas/modulo2-garantias.pdf'</span>
  })

  <span class="cm">// 2. Conte√∫do resumido (3 msgs)</span>
  .<span class="fn">addAnswer</span>(<span class="str">`üìå *Tipos de garantia mais comuns:*\n\n‚Ä¢ *Pessoal:* Aval e fian√ßa ‚Äî pessoa f√≠sica ou jur√≠dica garante a d√≠vida\n‚Ä¢ *Real:* Hipoteca, aliena√ß√£o fiduci√°ria, penhor ‚Äî bem fica vinculado ao cr√©dito\n‚Ä¢ *Fidejuss√≥ria:* Combina√ß√£o de garantias pessoal + real`</span>)
  .<span class="fn">addAnswer</span>(<span class="str">`üí° *Por que isso importa para voc√™?*\n\nAo acessar cr√©dito, a garantia define: taxa de juros, prazo e limite aprovado. Quanto mais s√≥lida a garantia, melhores as condi√ß√µes.`</span>)

  <span class="cm">// 3. Quiz ‚Äî 3 perguntas com scoring</span>
  .<span class="fn">addAnswer</span>(<span class="str">`üß† *Quiz do M√≥dulo 2*\n\nPergunta 1/3: Qual tipo de garantia envolve a vincula√ß√£o de um bem im√≥vel √† opera√ß√£o de cr√©dito?\n\n(A) Aval\n(B) Hipoteca\n(C) Fian√ßa`</span>, { <span class="op">capture</span>: <span class="kw">true</span> },
    <span class="kw">async</span> (<span class="op">ctx</span>, { <span class="fn">state</span> }) => {
      <span class="kw">const</span> score = <span class="op">ctx</span>.body.<span class="fn">toLowerCase</span>().<span class="fn">includes</span>(<span class="str">'b'</span>) ? <span class="num">1</span> : <span class="num">0</span>
      <span class="kw">await</span> <span class="fn">state</span>.<span class="fn">update</span>({ score1: score })
    }
  )

  .<span class="fn">addAnswer</span>(<span class="str">`Pergunta 2/3: O aval √© uma garantia do tipo:\n\n(A) Real\n(B) Pessoal\n(C) Fidejuss√≥ria`</span>, { <span class="op">capture</span>: <span class="kw">true</span> },
    <span class="kw">async</span> (<span class="op">ctx</span>, { <span class="fn">state</span> }) => {
      <span class="kw">const</span> score = <span class="op">ctx</span>.body.<span class="fn">toLowerCase</span>().<span class="fn">includes</span>(<span class="str">'b'</span>) ? <span class="num">1</span> : <span class="num">0</span>
      <span class="kw">await</span> <span class="fn">state</span>.<span class="fn">update</span>({ score2: score })
    }
  )

  .<span class="fn">addAnswer</span>(<span class="str">`Pergunta 3/3: Aliena√ß√£o fiduci√°ria √© um exemplo de garantia:\n\n(A) Pessoal\n(B) Real\n(C) Fidejuss√≥ria`</span>, { <span class="op">capture</span>: <span class="kw">true</span> },
    <span class="kw">async</span> (<span class="op">ctx</span>, { <span class="fn">state</span>, <span class="fn">gotoFlow</span>, <span class="fn">flowDynamic</span> }) => {
      <span class="kw">const</span> s3 = <span class="op">ctx</span>.body.<span class="fn">toLowerCase</span>().<span class="fn">includes</span>(<span class="str">'b'</span>) ? <span class="num">1</span> : <span class="num">0</span>
      <span class="kw">const</span> total = (<span class="fn">state</span>.<span class="fn">get</span>(<span class="str">'score1'</span>) + <span class="fn">state</span>.<span class="fn">get</span>(<span class="str">'score2'</span>) + s3) / <span class="num">3</span> * <span class="num">100</span>

      <span class="cm">// Salva no Wellms e N8N async</span>
      <span class="kw">await</span> <span class="fn">wellmsSaveProgress</span>(<span class="op">ctx</span>.from, <span class="str">'modulo2'</span>, total)

      <span class="kw">if</span> (total >= <span class="num">70</span>) {
        <span class="kw">await</span> <span class="fn">flowDynamic</span>(<span class="str">`‚úÖ *${total.toFixed(0)}% ‚Äî Aprovado!*\n\nExcelente! Voc√™ pode avan√ßar para o M√≥dulo 3.`</span>)
        <span class="kw">return</span> <span class="fn">gotoFlow</span>(<span class="cls">modulo3Flow</span>)
      }
      <span class="kw">await</span> <span class="fn">flowDynamic</span>(<span class="str">`üìö *${total.toFixed(0)}% ‚Äî Vamos revisar?*\n\nQuase l√°! Revise o material e tente novamente.`</span>)
      <span class="kw">return</span> <span class="fn">gotoFlow</span>(<span class="cls">revisaoModulo2Flow</span>)
    }
  )</pre>
    </div>

    <div class="code-block" style="margin-top:8px">
      <div class="code-header">
        <div class="code-dot" style="background:#ff5f57"></div>
        <div class="code-dot" style="background:#febc2e"></div>
        <div class="code-dot" style="background:#28c840"></div>
        <span class="code-filename">services/ragflow.ts ‚Äî consulta sem√¢ntica nas apostilas</span>
      </div>
<pre><span class="kw">export async function</span> <span class="fn">ragflowSearch</span>(<span class="op">query</span>: <span class="cls">string</span>, <span class="op">moduleId</span>: <span class="cls">string</span>) {
  <span class="kw">const</span> res = <span class="kw">await</span> <span class="fn">fetch</span>(<span class="str">`${process.env.RAGFLOW_URL}/api/v1/retrieval`</span>, {
    <span class="op">method</span>: <span class="str">'POST'</span>,
    <span class="op">headers</span>: { <span class="str">'Authorization'</span>: <span class="str">`Bearer ${process.env.RAGFLOW_KEY}`</span> },
    <span class="op">body</span>: <span class="cls">JSON</span>.<span class="fn">stringify</span>({ query, <span class="op">dataset_ids</span>: [moduleId], <span class="op">top_k</span>: <span class="num">3</span> })
  })
  <span class="kw">return</span> (await res.<span class="fn">json</span>()).chunks.<span class="fn">map</span>(c => c.content).<span class="fn">join</span>(<span class="str">'\n\n'</span>)
}</pre>
    </div>
  </div>

  <!-- TAB: EQUIPE -->
  <div class="tab-content" id="tab-equipe">
    <div class="section-header">
      <div class="section-title">Quem faz o qu√™ ‚Äî divis√£o para equipe mista</div>
      <div class="section-sub">C√≥digo fica com dev/IA ¬∑ Configura√ß√£o e opera√ß√£o ficam com gestores e tutores via UI dedicada</div>
    </div>
    <div class="roles">
      <div class="role-card">
        <div class="role-icon">ü§ñ</div>
        <div class="role-name">IA (Antigravity / Claude Code)</div>
        <div class="role-tool">Google Antigravity + terminal</div>
        <ul class="role-items">
          <li>Gera fluxos BuilderBot por m√≥dulo a partir da ementa</li>
          <li>Atualiza conte√∫do quando material muda</li>
          <li>Cria p√°ginas do portal de conte√∫do rico</li>
          <li>Gera templates de certificado</li>
          <li>Refina prompts com base nas m√©tricas</li>
        </ul>
      </div>
      <div class="role-card">
        <div class="role-icon">üë®‚Äçüíª</div>
        <div class="role-name">Dev / Voc√™</div>
        <div class="role-tool">Git + Coolify + BuilderBot CLI</div>
        <ul class="role-items">
          <li>Revisa e faz commit dos fluxos gerados pela IA</li>
          <li>Configura integra√ß√µes (RAGFlow, Wellms, N8N)</li>
          <li>Deploy via Coolify com 1 clique</li>
          <li>Configura ToolJet e Metabase uma vez</li>
          <li>Monitora logs e performance</li>
        </ul>
      </div>
      <div class="role-card">
        <div class="role-icon">üìä</div>
        <div class="role-name">Gestor de Curso</div>
        <div class="role-tool">ToolJet + Metabase</div>
        <ul class="role-items">
          <li>Ajusta score m√≠nimo e tempo de m√≥dulo via ToolJet</li>
          <li>Visualiza progresso dos alunos</li>
          <li>Acompanha funil de leads qualificados</li>
          <li>Exporta relat√≥rios em CSV/Excel</li>
          <li>Aprova conte√∫do antes de publicar (opcional)</li>
        </ul>
      </div>
      <div class="role-card">
        <div class="role-icon">üéì</div>
        <div class="role-name">Tutor</div>
        <div class="role-tool">Chatwoot</div>
        <ul class="role-items">
          <li>Recebe alunos que solicitaram ajuda humana</li>
          <li>Bot pausa automaticamente durante o atendimento</li>
          <li>Responde d√∫vidas com hist√≥rico vis√≠vel</li>
          <li>Encerra atendimento ‚Äî bot retoma de onde parou</li>
          <li>V√™ fila em tempo real no painel Chatwoot</li>
        </ul>
      </div>
      <div class="role-card">
        <div class="role-icon">üíº</div>
        <div class="role-name">Consultor Comercial</div>
        <div class="role-tool">Metabase</div>
        <ul class="role-items">
          <li>Acessa tabela de leads qualificados (interesse_investimento, etc)</li>
          <li>Filtra por tipo de interesse e score de lead</li>
          <li>Acompanha funil de convers√£o de consultoria</li>
          <li>Recebe alertas autom√°ticos de novos leads qualificados</li>
        </ul>
      </div>
      <div class="role-card">
        <div class="role-icon">üéØ</div>
        <div class="role-name">Aluno</div>
        <div class="role-tool">WhatsApp (sem instalar nada)</div>
        <ul class="role-items">
          <li>Conversa no WhatsApp que j√° tem no celular</li>
          <li>Acessa PDFs, v√≠deos e links do portal pelo chat</li>
          <li>Recebe feedback instant√¢neo nos quizzes</li>
          <li>Baixa certificado por link direto no WhatsApp</li>
          <li>Zero atrito ‚Äî sem app, sem login, sem cadastro</li>
        </ul>
      </div>
    </div>
  </div>

  <!-- TAB: ROADMAP -->
  <div class="tab-content" id="tab-roadmap">
    <div class="section-header">
      <div class="section-title">Roadmap ‚Äî ~18 dias para sistema completo</div>
      <div class="section-sub">IA gera as partes mais demoradas ¬∑ Deploy incremental ¬∑ Valor desde o dia 2</div>
    </div>
    <div class="roadmap">
      <div class="rm-item">
        <div class="rm-num">1</div>
        <div><div class="rm-name">Infra base</div><div class="rm-desc">Coolify, subdom√≠nios, SSL, PostgreSQL+Redis+MinIO+Evolution API</div></div>
        <div class="rm-days">1 dia</div>
        <div class="rm-who">Dev + Coolify UI</div>
      </div>
      <div class="rm-item">
        <div class="rm-num">2</div>
        <div><div class="rm-name">BuilderBot + Evolution API</div><div class="rm-desc">Bot rodando, recebendo e respondendo mensagens WhatsApp</div></div>
        <div class="rm-days">1 dia</div>
        <div class="rm-who">Dev (TypeScript)</div>
      </div>
      <div class="rm-item">
        <div class="rm-num">3</div>
        <div><div class="rm-name">Primeiro fluxo de onboarding</div><div class="rm-desc">IA gera: coleta nome, n√≠vel, apresenta a trilha. Commit no Git.</div></div>
        <div class="rm-days">2 dias</div>
        <div class="rm-who">IA + Dev revisa</div>
      </div>
      <div class="rm-item">
        <div class="rm-num">4</div>
        <div><div class="rm-name">RAGFlow + apostilas</div><div class="rm-desc">RAGFlow indexa PDFs, API de busca sem√¢ntica funcionando</div></div>
        <div class="rm-days">1 dia</div>
        <div class="rm-who">Dev + Docker</div>
      </div>
      <div class="rm-item">
        <div class="rm-num">5</div>
        <div><div class="rm-name">Fluxos de todos os m√≥dulos</div><div class="rm-desc">IA gera fluxos completos: conte√∫do + quiz + scoring para cada m√≥dulo do curso</div></div>
        <div class="rm-days">3 dias</div>
        <div class="rm-who">IA (Antigravity)</div>
      </div>
      <div class="rm-item">
        <div class="rm-num">6</div>
        <div><div class="rm-name">Wellms + progresso + certificados</div><div class="rm-desc">API de cursos e m√≥dulos, BuilderBot salva progresso via REST</div></div>
        <div class="rm-days">2 dias</div>
        <div class="rm-who">Dev + N8N</div>
      </div>
      <div class="rm-item">
        <div class="rm-num">7</div>
        <div><div class="rm-name">ToolJet (painel admin)</div><div class="rm-desc">Interface para gestores configurarem sem c√≥digo</div></div>
        <div class="rm-days">1 dia</div>
        <div class="rm-who">Dev configura</div>
      </div>
      <div class="rm-item">
        <div class="rm-num">8</div>
        <div><div class="rm-name">Chatwoot + tutores</div><div class="rm-desc">Inbox multi-agente, pausa bot, retomada autom√°tica</div></div>
        <div class="rm-days">1 dia</div>
        <div class="rm-who">Dev + config</div>
      </div>
      <div class="rm-item">
        <div class="rm-num">9</div>
        <div><div class="rm-name">Scoring + qualifica√ß√£o de leads</div><div class="rm-desc">Tags de interesse, score, funil de consultoria no N8N</div></div>
        <div class="rm-days">2 dias</div>
        <div class="rm-who">Dev N8N</div>
      </div>
      <div class="rm-item">
        <div class="rm-num">10</div>
        <div><div class="rm-name">Certificados autom√°ticos PDF</div><div class="rm-desc">n8n-nodes-puppeteer gera PDF, MinIO armazena, WA entrega</div></div>
        <div class="rm-days">1 dia</div>
        <div class="rm-who">Dev N8N</div>
      </div>
      <div class="rm-item">
        <div class="rm-num">11</div>
        <div><div class="rm-name">Metabase analytics</div><div class="rm-desc">Dashboard de m√©tricas e leads tabulados para gestores</div></div>
        <div class="rm-days">1 dia</div>
        <div class="rm-who">Dev + config</div>
      </div>
      <div class="rm-item">
        <div class="rm-num">12</div>
        <div><div class="rm-name">Portal de conte√∫do rico</div><div class="rm-desc">Next.js com v√≠deos e material, linkado pelo bot via WhatsApp</div></div>
        <div class="rm-days">2 dias</div>
        <div class="rm-who">IA gera p√°ginas</div>
      </div>
      <div class="rm-item rm-total">
        <div class="rm-num" style="color:var(--yellow)">‚úì</div>
        <div><div class="rm-name">Sistema completo funcional</div><div class="rm-desc">BuilderBot + Evolution + LMS + RAG + IA + Admin + Analytics + Tutores + Certificados</div></div>
        <div class="rm-days">~18 dias</div>
        <div class="rm-who">Dev + IA (Antigravity)</div>
      </div>
    </div>
  </div>

</div>

<script>
function showTab(name) {
  document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
  document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
  document.getElementById('tab-' + name).classList.add('active');
  event.target.classList.add('active');
}
</script>
</body>
</html>
